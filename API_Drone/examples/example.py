from DroneAPI import vehicle

drone = vehicle.connection('tcp:0.0.0.0:8100') # Connect to the drone

armable = False
while not armable:
	armable = drone.is_armable() # Wait for the drone to be armable

fence_list = [[41.27640942348419, 1.9886658713221552], [41.27643361279337, 1.988196484744549], [41.27615341941283, 1.9883145019412043], [41.27635096595008, 1.9891352578997614], [41.27663317425185, 1.9890118762850764], [41.27643361279337, 1.988196484744549]]

drone.upload_GEOFence(fence_list) # Upload GEOFence
drone.setparam("FENCE_ALT_MAX", 10) # Set max alt for GEOFence
drone.enable_GEOFence("ENABLE") # Enable GEOFence

mission_list = [[41.276409423484175, 1.988665871322155, 8.918558653529619], [41.27640942348418, 1.9886658713221554, 9.837117305177806], [41.276409423484175, 1.988665871322155, 8.918558653529619], [41.27640942292735, 1.9883078026369974, 6.918629103759522], [41.2763914145507, 1.9890239397407248, 9.918629416561247], [41.27658950702848, 1.9889045843602846, 8.918621394404905], [41.27622933935438, 1.988427159484106, 5.918621393951984], [41.27631938106585, 1.9883197388438847, 8.91863234246428], [41.27640942348418, 1.9886658713221554, 10.449489741559463], [41.27649946486044, 1.9890120047517676, 8.918632342086552], [41.276409423484175, 1.988665871322155, 9.224744870778412]]

drone.upload_Mission(mission_list) # Upload mission

drone.setmode("AUTO") # Set drone to AUTO to start the mission
